{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Typography,TextField,Button,Grid,Paper}from'@material-ui/core';import{makeStyles}from'@material-ui/core/styles';import ArrowBackIcon from'@material-ui/icons/ArrowBack';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({container:{marginTop:theme.spacing(6),display:'flex',flexDirection:'column',alignItems:'center'},paper:{padding:theme.spacing(4),borderRadius:theme.spacing(1),boxShadow:theme.shadows[3],maxWidth:600,width:'100%'},header:{marginBottom:theme.spacing(4),textAlign:'center'},form:{width:'100%',marginTop:theme.spacing(2)},backButton:{marginBottom:theme.spacing(2),alignSelf:'flex-start',marginLeft:-theme.spacing(4)},saveButton:{marginTop:theme.spacing(4),width:'100%'}}));const Profile=()=>{const classes=useStyles();const[user,setUser]=useState(null);useEffect(()=>{const storedUser=localStorage.getItem('user');if(storedUser){setUser(JSON.parse(storedUser));}},[]);const handleChange=e=>{setUser({...user,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();try{const token=localStorage.getItem('token');const response=await fetch('http://localhost:3003/api/update',{method:'PUT',headers:{'Content-Type':'application/json',Authorization:token},body:JSON.stringify(user)});const data=await response.json();console.log(data.message);toast.success('Profile updated successfully.',{position:toast.POSITION.TOP_RIGHT,autoClose:3000});localStorage.setItem('user',JSON.stringify(data.user));}catch(error){console.error('Error updating profile:',error);toast.error('Error updating profile. Please try again.',{position:toast.POSITION.TOP_RIGHT,autoClose:3000});}};if(!user){return/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",className:classes.container,children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(ArrowBackIcon,{}),className:classes.backButton,onClick:()=>window.history.back(),children:\"Back to Homepage\"}),/*#__PURE__*/_jsxs(Paper,{className:classes.paper,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",className:classes.header,children:\"Profile\"}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{name:\"firstName\",label:\"First Name\",fullWidth:true,value:user.firstName,onChange:handleChange,variant:\"outlined\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{name:\"lastName\",label:\"Last Name\",fullWidth:true,value:user.lastName,onChange:handleChange,variant:\"outlined\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{name:\"address\",label:\"Address\",fullWidth:true,value:user.address,onChange:handleChange,variant:\"outlined\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{name:\"postalCode\",label:\"Postal Code\",fullWidth:true,value:user.postalCode,onChange:handleChange,variant:\"outlined\"})})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.saveButton,children:\"Save\"})]})]})]});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","Container","Typography","TextField","Button","Grid","Paper","makeStyles","ArrowBackIcon","jsx","_jsx","jsxs","_jsxs","useStyles","theme","container","marginTop","spacing","display","flexDirection","alignItems","paper","padding","borderRadius","boxShadow","shadows","maxWidth","width","header","marginBottom","textAlign","form","backButton","alignSelf","marginLeft","saveButton","Profile","classes","user","setUser","storedUser","localStorage","getItem","JSON","parse","handleChange","e","target","name","value","handleSubmit","preventDefault","token","response","fetch","method","headers","Authorization","body","stringify","data","json","console","log","message","toast","success","position","POSITION","TOP_RIGHT","autoClose","setItem","error","variant","children","className","startIcon","onClick","window","history","back","component","onSubmit","item","xs","sm","label","fullWidth","firstName","onChange","lastName","address","postalCode","type","color"],"sources":["/Users/rayanslim/Desktop/docker-bootcamp-resources/03-section-three/ecommerce-ui/client/src/pages/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Typography, TextField, Button, Grid, Paper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    marginTop: theme.spacing(6),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  paper: {\n    padding: theme.spacing(4),\n    borderRadius: theme.spacing(1),\n    boxShadow: theme.shadows[3],\n    maxWidth: 600,\n    width: '100%',\n  },\n  header: {\n    marginBottom: theme.spacing(4),\n    textAlign: 'center',\n  },\n  form: {\n    width: '100%',\n    marginTop: theme.spacing(2),\n  },\n  backButton: {\n    marginBottom: theme.spacing(2),\n    alignSelf: 'flex-start',\n    marginLeft: -theme.spacing(4),\n  },\n  saveButton: {\n    marginTop: theme.spacing(4),\n    width: '100%',\n  },\n}));\n\nconst Profile = () => {\n  const classes = useStyles();\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem('user');\n    if (storedUser) {\n      setUser(JSON.parse(storedUser));\n    }\n  }, []);\n\n  const handleChange = (e) => {\n    setUser({ ...user, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch('http://localhost:3003/api/update', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: token,\n        },\n        body: JSON.stringify(user),\n      });\n      const data = await response.json();\n      console.log(data.message);\n      toast.success('Profile updated successfully.', {\n        position: toast.POSITION.TOP_RIGHT,\n        autoClose: 3000,\n      });  \n      localStorage.setItem('user', JSON.stringify(data.user));\n    } catch (error) {\n      console.error('Error updating profile:', error);\n      toast.error('Error updating profile. Please try again.', {\n        position: toast.POSITION.TOP_RIGHT,\n        autoClose: 3000,\n      });  \n    }\n  };\n\n  if (!user) {\n    return <Typography variant=\"body1\">Loading...</Typography>;\n  }\n\n  return (\n    <Container maxWidth=\"sm\" className={classes.container}>\n      <Button\n        variant=\"outlined\"\n        startIcon={<ArrowBackIcon />}\n        className={classes.backButton}\n        onClick={() => window.history.back()}\n      >\n        Back to Homepage\n      </Button>\n      <Paper className={classes.paper}>\n        <Typography variant=\"h4\" component=\"h1\" className={classes.header}>\n          Profile\n        </Typography>\n        <form className={classes.form} onSubmit={handleSubmit}>\n          <Grid container spacing={2}>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                name=\"firstName\"\n                label=\"First Name\"\n                fullWidth\n                value={user.firstName}\n                onChange={handleChange}\n                variant=\"outlined\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                name=\"lastName\"\n                label=\"Last Name\"\n                fullWidth\n                value={user.lastName}\n                onChange={handleChange}\n                variant=\"outlined\"\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                name=\"address\"\n                label=\"Address\"\n                fullWidth\n                value={user.address}\n                onChange={handleChange}\n                variant=\"outlined\"\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                name=\"postalCode\"\n                label=\"Postal Code\"\n                fullWidth\n                value={user.postalCode}\n                onChange={handleChange}\n                variant=\"outlined\"\n              />\n            </Grid>\n          </Grid>\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.saveButton}\n          >\n            Save\n          </Button>\n        </form>\n      </Paper>\n    </Container>\n  );\n};\n\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}