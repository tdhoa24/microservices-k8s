{"ast":null,"code":"import React,{useState}from'react';import{Container,Typography,Button,Grid}from'@material-ui/core';import{makeStyles}from'@material-ui/core/styles';import SignUpForm from'./SignUpForm';import SignInForm from'./SignInForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({container:{marginTop:theme.spacing(4)},toggleButton:{marginTop:theme.spacing(2)}}));const AuthPage=_ref=>{let{setIsAuthenticated}=_ref;const classes=useStyles();const[isSignUp,setIsSignUp]=useState(true);const handleSignUp=async formData=>{try{const response=await fetch('http://localhost:3003/api/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});const data=await response.json();console.log(data.message);// Prompt the user to sign in after successful sign-up\nsetIsSignUp(false);}catch(error){console.error('Error signing up:',error);}};const handleSignIn=async formData=>{try{const response=await fetch('http://localhost:3003/api/signin',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});const data=await response.json();console.log(data.message);// Store the token and update the authentication status\nlocalStorage.setItem('token',data.token);setIsAuthenticated(true);// Redirect to the products page after successful sign-in\nwindow.location.href='/products';}catch(error){console.error('Error signing in:',error);}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",className:classes.container,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",gutterBottom:true,children:isSignUp?'Sign Up':'Sign In'}),isSignUp?/*#__PURE__*/_jsx(SignUpForm,{onSignUp:handleSignUp}):/*#__PURE__*/_jsx(SignInForm,{onSignIn:handleSignIn}),/*#__PURE__*/_jsx(Grid,{container:true,justify:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"text\",className:classes.toggleButton,onClick:()=>setIsSignUp(!isSignUp),children:isSignUp?'Already have an account? Sign In':'Create an account'})})]});};export default AuthPage;","map":{"version":3,"names":["React","useState","Container","Typography","Button","Grid","makeStyles","SignUpForm","SignInForm","jsx","_jsx","jsxs","_jsxs","useStyles","theme","container","marginTop","spacing","toggleButton","AuthPage","_ref","setIsAuthenticated","classes","isSignUp","setIsSignUp","handleSignUp","formData","response","fetch","method","headers","body","JSON","stringify","data","json","console","log","message","error","handleSignIn","localStorage","setItem","token","window","location","href","maxWidth","className","children","variant","align","gutterBottom","onSignUp","onSignIn","justify","onClick"],"sources":["/Users/rayanslim/Desktop/docker-bootcamp-resources/03-section-three/ecommerce-ui/client/src/pages/AuthPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Container, Typography, Button, Grid } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SignUpForm from './SignUpForm';\nimport SignInForm from './SignInForm';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    marginTop: theme.spacing(4),\n  },\n  toggleButton: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst AuthPage = ({ setIsAuthenticated }) => {\n  const classes = useStyles();\n  const [isSignUp, setIsSignUp] = useState(true);\n\n  const handleSignUp = async (formData) => {\n    try {\n      const response = await fetch('http://localhost:3003/api/signup', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n      });\n      const data = await response.json();\n      console.log(data.message);\n      // Prompt the user to sign in after successful sign-up\n      setIsSignUp(false);\n    } catch (error) {\n      console.error('Error signing up:', error);\n    }\n  };\n\n  const handleSignIn = async (formData) => {\n    try {\n      const response = await fetch('http://localhost:3003/api/signin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n      });\n      const data = await response.json();\n      console.log(data.message);\n      // Store the token and update the authentication status\n      localStorage.setItem('token', data.token);\n      setIsAuthenticated(true);\n      // Redirect to the products page after successful sign-in\n      window.location.href = '/products';\n    } catch (error) {\n      console.error('Error signing in:', error);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\" className={classes.container}>\n      <Typography variant=\"h4\" align=\"center\" gutterBottom>\n        {isSignUp ? 'Sign Up' : 'Sign In'}\n      </Typography>\n      {isSignUp ? (\n        <SignUpForm onSignUp={handleSignUp} />\n      ) : (\n        <SignInForm onSignIn={handleSignIn} />\n      )}\n      <Grid container justify=\"center\">\n        <Button\n          variant=\"text\"\n          className={classes.toggleButton}\n          onClick={() => setIsSignUp(!isSignUp)}\n        >\n          {isSignUp ? 'Already have an account? Sign In' : 'Create an account'}\n        </Button>\n      </Grid>\n    </Container>\n  );\n};\n\nexport default AuthPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}