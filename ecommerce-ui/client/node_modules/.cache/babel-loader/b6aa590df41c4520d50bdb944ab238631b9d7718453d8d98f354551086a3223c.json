{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import{Container,Typography,Button,Grid,Paper}from'@material-ui/core';import{makeStyles}from'@material-ui/core/styles';import ArrowBackIcon from'@material-ui/icons/ArrowBack';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({container:{marginTop:theme.spacing(6),display:'flex',flexDirection:'column',alignItems:'center'},paper:{padding:theme.spacing(4),borderRadius:theme.spacing(1),boxShadow:theme.shadows[3],maxWidth:800,width:'100%'},image:{width:'100%',maxHeight:400,objectFit:'cover',borderRadius:theme.spacing(1)},info:{marginTop:theme.spacing(4)},name:{fontWeight:'bold',marginBottom:theme.spacing(2)},description:{marginBottom:theme.spacing(2)},price:{fontWeight:'bold',marginBottom:theme.spacing(2)},category:{marginBottom:theme.spacing(2)},quantity:{marginBottom:theme.spacing(4)},button:{marginTop:theme.spacing(2)},backButton:{marginBottom:theme.spacing(2),alignSelf:'flex-start'}}));const ProductDetail=()=>{const classes=useStyles();const{id}=useParams();const[product,setProduct]=useState(null);const[quantity,setQuantity]=useState(null);useEffect(()=>{fetchProduct();fetchInventory();},[id]);const fetchProduct=async()=>{try{const response=await fetch(\"http://localhost:3001/api/products/\".concat(id));const data=await response.json();setProduct(data);}catch(error){console.error('Error fetching product:',error);toast.error('Error accessing API',{position:\"top-right\",autoClose:3000});}};const fetchInventory=async()=>{try{const response=await fetch(\"http://localhost:3002/api/inventory/\".concat(id));const data=await response.json();setQuantity(data.quantity);}catch(error){console.error('Error fetching inventory:',error);setQuantity(0);toast.error('Error accessing Inventory API',{position:\"top-right\",autoClose:3000});}};const addToCart=async()=>{try{const user=JSON.parse(localStorage.getItem('user'));const response=await fetch(\"http://localhost:9090/api/orders/\".concat(user.id,\"/cart\"));const cartItems=await response.json();if(cartItems.some(item=>item.productId===product.id)){toast.info('Product already exists in the cart.',{position:'top-right',autoClose:3000});}else{await fetch(\"http://localhost:9090/api/orders/\".concat(user.id,\"/cart\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(product)});toast.success('Product added to the cart!',{position:'top-right',autoClose:3000});}}catch(error){toast.error('Error adding product to the cart.',{position:'top-right',autoClose:3000});}};if(!product){return/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",className:classes.container,children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(ArrowBackIcon,{}),className:classes.backButton,component:Link,to:\"/products\",children:\"Back to Products\"}),/*#__PURE__*/_jsx(Paper,{className:classes.paper,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/products/\".concat(product.name,\".webp\"),alt:product.name,className:classes.image})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.info,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",className:classes.name,children:product.name}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",className:classes.description,children:product.description}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",className:classes.price,children:[\"Price: $\",product.price.toFixed(2)]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",className:classes.category,children:[\"Category: \",product.category]}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",className:classes.quantity,children:quantity!==null?\"In Stock: \".concat(quantity):'Loading stock quantity...'}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",className:classes.button,onClick:addToCart,children:\"Add to Cart\"})]})})]})})]});};export default ProductDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","Container","Typography","Button","Grid","Paper","makeStyles","ArrowBackIcon","toast","jsx","_jsx","jsxs","_jsxs","useStyles","theme","container","marginTop","spacing","display","flexDirection","alignItems","paper","padding","borderRadius","boxShadow","shadows","maxWidth","width","image","maxHeight","objectFit","info","name","fontWeight","marginBottom","description","price","category","quantity","button","backButton","alignSelf","ProductDetail","classes","id","product","setProduct","setQuantity","fetchProduct","fetchInventory","response","fetch","concat","data","json","error","console","position","autoClose","addToCart","user","JSON","parse","localStorage","getItem","cartItems","some","item","productId","method","headers","body","stringify","success","variant","children","className","startIcon","component","to","xs","sm","src","alt","toFixed","color","onClick"],"sources":["/Users/rayanslim/Desktop/docker-bootcamp-resources/03-section-three/ecommerce-ui/client/src/pages/ProductDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { Container, Typography, Button, Grid, Paper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport {  toast } from 'react-toastify';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    marginTop: theme.spacing(6),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  paper: {\n    padding: theme.spacing(4),\n    borderRadius: theme.spacing(1),\n    boxShadow: theme.shadows[3],\n    maxWidth: 800,\n    width: '100%',\n  },\n  image: {\n    width: '100%',\n    maxHeight: 400,\n    objectFit: 'cover',\n    borderRadius: theme.spacing(1),\n  },\n  info: {\n    marginTop: theme.spacing(4),\n  },\n  name: {\n    fontWeight: 'bold',\n    marginBottom: theme.spacing(2),\n  },\n  description: {\n    marginBottom: theme.spacing(2),\n  },\n  price: {\n    fontWeight: 'bold',\n    marginBottom: theme.spacing(2),\n  },\n  category: {\n    marginBottom: theme.spacing(2),\n  },\n  quantity: {\n    marginBottom: theme.spacing(4),\n  },\n  button: {\n    marginTop: theme.spacing(2),\n  },\n  backButton: {\n    marginBottom: theme.spacing(2),\n    alignSelf: 'flex-start',\n  },\n}));\n\nconst ProductDetail = () => {\n  const classes = useStyles();\n  const { id } = useParams();\n  const [product, setProduct] = useState(null);\n  const [quantity, setQuantity] = useState(null);\n\n  useEffect(() => {\n    fetchProduct();\n    fetchInventory();\n  }, [id]);\n\n  const fetchProduct = async () => {\n    try {\n      const response = await fetch(`http://localhost:3001/api/products/${id}`);\n      const data = await response.json();\n      setProduct(data);\n    } catch (error) {\n      console.error('Error fetching product:', error);\n      toast.error('Error accessing API', {\n        position: \"top-right\",\n        autoClose: 3000,\n      });\n\n    }\n  };\n\n  const fetchInventory = async () => {\n    try {\n      const response = await fetch(`http://localhost:3002/api/inventory/${id}`);\n      const data = await response.json();\n      setQuantity(data.quantity);\n    } catch (error) {\n      console.error('Error fetching inventory:', error);\n      setQuantity(0);\n      toast.error('Error accessing Inventory API', {\n        position: \"top-right\",\n        autoClose: 3000,\n      });\n\n    }\n  };\n\n  const addToCart = async () => {\n    try {\n      const user = JSON.parse(localStorage.getItem('user'));\n      const response = await fetch(`http://localhost:9090/api/orders/${user.id}/cart`);\n      const cartItems = await response.json();\n  \n      if (cartItems.some((item) => item.productId === product.id)) {\n        toast.info('Product already exists in the cart.', {\n          position: 'top-right',\n          autoClose: 3000,\n        });\n      } else {\n        await fetch(`http://localhost:9090/api/orders/${user.id}/cart`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(product),\n        });\n        toast.success('Product added to the cart!', {\n          position: 'top-right',\n          autoClose: 3000,\n        });\n      }\n    } catch (error) {\n      toast.error('Error adding product to the cart.', {\n        position: 'top-right',\n        autoClose: 3000,\n      });\n    }\n  };\n  \n\n  if (!product) {\n    return <Typography variant=\"body1\">Loading...</Typography>;\n  }\n\n  return (\n    <Container maxWidth=\"md\" className={classes.container}>\n      <Button\n        variant=\"outlined\"\n        startIcon={<ArrowBackIcon />}\n        className={classes.backButton}\n        component={Link}\n        to=\"/products\"\n      >\n        Back to Products\n      </Button>\n      <Paper className={classes.paper}>\n        <Grid container spacing={4}>\n          <Grid item xs={12} sm={6}>\n            <img\n              src={`/images/products/${product.name}.webp`}\n              alt={product.name}\n              className={classes.image}\n            />\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <div className={classes.info}>\n              <Typography variant=\"h4\" className={classes.name}>\n                {product.name}\n              </Typography>\n              <Typography variant=\"body1\" className={classes.description}>\n                {product.description}\n              </Typography>\n              <Typography variant=\"h6\" className={classes.price}>\n                Price: ${product.price.toFixed(2)}\n              </Typography>\n              <Typography variant=\"body1\" className={classes.category}>\n                Category: {product.category}\n              </Typography>\n              <Typography variant=\"body1\" className={classes.quantity}>\n                {quantity !== null ? (\n                  `In Stock: ${quantity}`\n                ) : (\n                  'Loading stock quantity...'\n                )}\n              </Typography>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.button}\n                onClick={addToCart}\n              >\n                Add to Cart\n              </Button>\n            </div>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Container>\n  );\n};\n\nexport default ProductDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}