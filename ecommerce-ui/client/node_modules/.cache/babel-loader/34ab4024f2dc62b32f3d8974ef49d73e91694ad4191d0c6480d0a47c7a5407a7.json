{"ast":null,"code":"import React,{useState}from'react';import{Container,Typography,Button,Grid}from'@material-ui/core';import{makeStyles}from'@material-ui/core/styles';import SignUpForm from'./SignUpForm';import SignInForm from'./SignInForm';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({container:{marginTop:theme.spacing(4)},toggleButton:{marginTop:theme.spacing(2)}}));const AuthPage=_ref=>{let{setIsAuthenticated,setUser}=_ref;const classes=useStyles();const[isSignUp,setIsSignUp]=useState(false);const handleSignUp=async formData=>{try{const response=await fetch('/api/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});const data=await response.json();console.log(data.message);toast.success('Sign up successful. Please sign in.',{position:\"top-right\",autoClose:3000});setIsSignUp(false);}catch(error){console.error('Error signing up:',error);toast.error('Error signing up. Please try again.',{position:\"top-right\",autoClose:3000});}};const handleSignIn=async formData=>{try{const response=await fetch('/api/signin',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});if(response.ok){const data=await response.json();console.log(data.message);if(data.token&&data.user){localStorage.setItem('token',data.token);localStorage.setItem('user',JSON.stringify(data.user));setIsAuthenticated(true);setUser(data.user);window.location.href='/';}else{console.error('Unexpected server response format');toast.error('Unexpected server response format.',{position:\"top-right\",autoClose:3000});}}else{console.error('Sign-in failed. Please check your credentials.');toast.error('Sign-in failed. Please check your credentials.',{position:\"top-right\",autoClose:3000});}}catch(error){console.error('Error signing in:',error);toast.error('Error signing in',{position:\"top-right\",autoClose:3000});}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",className:classes.container,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",gutterBottom:true,children:isSignUp?'Sign Up':'Sign In'}),isSignUp?/*#__PURE__*/_jsx(SignUpForm,{onSignUp:handleSignUp}):/*#__PURE__*/_jsx(SignInForm,{onSignIn:handleSignIn}),/*#__PURE__*/_jsx(Grid,{container:true,justify:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"text\",className:classes.toggleButton,onClick:()=>setIsSignUp(!isSignUp),children:isSignUp?'Already have an account? Sign In':'Create an account'})})]});};export default AuthPage;","map":{"version":3,"names":["React","useState","Container","Typography","Button","Grid","makeStyles","SignUpForm","SignInForm","toast","jsx","_jsx","jsxs","_jsxs","useStyles","theme","container","marginTop","spacing","toggleButton","AuthPage","_ref","setIsAuthenticated","setUser","classes","isSignUp","setIsSignUp","handleSignUp","formData","response","fetch","method","headers","body","JSON","stringify","data","json","console","log","message","success","position","autoClose","error","handleSignIn","ok","token","user","localStorage","setItem","window","location","href","maxWidth","className","children","variant","align","gutterBottom","onSignUp","onSignIn","justify","onClick"],"sources":["/Users/rayanslim/Desktop/docker-bootcamp-resources/03-section-three/ecommerce-ui/client/src/pages/AuthPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Container, Typography, Button, Grid } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SignUpForm from './SignUpForm';\nimport SignInForm from './SignInForm';\nimport { toast } from 'react-toastify';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    marginTop: theme.spacing(4),\n  },\n  toggleButton: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst AuthPage = ({ setIsAuthenticated, setUser }) => {\n  const classes = useStyles();\n  const [isSignUp, setIsSignUp] = useState(false);\n\n  const handleSignUp = async (formData) => {\n    try {\n      const response = await fetch('/api/signup', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n      });\n      const data = await response.json();\n      console.log(data.message);\n      toast.success('Sign up successful. Please sign in.', {\n        position: \"top-right\",\n        autoClose: 3000,\n      });\n      setIsSignUp(false);\n    } catch (error) {\n      console.error('Error signing up:', error);\n      toast.error('Error signing up. Please try again.', {\n        position: \"top-right\",\n        autoClose: 3000,\n      });\n    }\n  };\n\n  const handleSignIn = async (formData) => {\n    try {\n      const response = await fetch('/api/signin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n      });\n      if (response.ok) {\n        const data = await response.json();\n        console.log(data.message);\n        if (data.token && data.user) {\n          localStorage.setItem('token', data.token);\n          localStorage.setItem('user', JSON.stringify(data.user));\n          setIsAuthenticated(true);\n          setUser(data.user);\n          window.location.href = '/';\n        } else {\n          console.error('Unexpected server response format');\n          toast.error('Unexpected server response format.', {\n            position: \"top-right\",\n            autoClose: 3000,\n          });\n        }\n      } else {\n        console.error('Sign-in failed. Please check your credentials.');\n        toast.error('Sign-in failed. Please check your credentials.', {\n          position: \"top-right\",\n          autoClose: 3000,\n        });\n      }\n    } catch (error) {\n      console.error('Error signing in:', error);\n      toast.error('Error signing in', {\n        position: \"top-right\",\n        autoClose: 3000,\n      });\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\" className={classes.container}>\n      <Typography variant=\"h4\" align=\"center\" gutterBottom>\n        {isSignUp ? 'Sign Up' : 'Sign In'}\n      </Typography>\n      {isSignUp ? (\n        <SignUpForm onSignUp={handleSignUp} />\n      ) : (\n        <SignInForm onSignIn={handleSignIn} />\n      )}\n      <Grid container justify=\"center\">\n        <Button variant=\"text\" className={classes.toggleButton} onClick={() => setIsSignUp(!isSignUp)}>\n          {isSignUp ? 'Already have an account? Sign In' : 'Create an account'}\n        </Button>\n      </Grid>\n    </Container>\n  );\n};\n\nexport default AuthPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}