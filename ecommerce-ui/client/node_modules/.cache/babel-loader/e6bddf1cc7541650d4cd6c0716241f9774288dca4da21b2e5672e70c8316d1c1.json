{"ast":null,"code":"import React,{useState}from'react';import{Container,Typography,Button,Grid}from'@material-ui/core';import{makeStyles}from'@material-ui/core/styles';import SignUpForm from'./SignUpForm';import SignInForm from'./SignInForm';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({container:{marginTop:theme.spacing(4)},toggleButton:{marginTop:theme.spacing(2)}}));const AuthPage=_ref=>{let{setIsAuthenticated,setUser}=_ref;const classes=useStyles();const[isSignUp,setIsSignUp]=useState(false);const handleSignUp=async formData=>{try{const response=await fetch('http://localhost:3003/api/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});const data=await response.json();console.log(data.message);toast.success('Sign up successful. Please sign in.',{position:toast.POSITION.TOP_RIGHT,autoClose:3000});setIsSignUp(false);}catch(error){console.error('Error signing up:',error);toast.error('Error signing up. Please try again.',{position:toast.POSITION.TOP_RIGHT,autoClose:3000});}};const handleSignIn=async formData=>{try{const response=await fetch('http://localhost:3003/api/signin',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});// Check if the response was successful\nif(response.ok){const data=await response.json();console.log(data.message);// Assuming your server responds with a token and user only if credentials are correct\nif(data.token&&data.user){// Store the token and user object only if authentication was successful\nlocalStorage.setItem('token',data.token);localStorage.setItem('user',JSON.stringify(data.user));setIsAuthenticated(true);setUser(data.user);// Redirect to the home page after successful sign-in\nwindow.location.href='/';}else{// Handle cases where the server response format is unexpected\nconsole.error('Unexpected server response format');toast.error('Unexpected server response format.',{position:toast.POSITION.TOP_RIGHT,autoClose:3000});}}else{// Handle unsuccessful sign-in attempts here\n// For example, show an error message to the user\nconsole.error('Sign-in failed. Please check your credentials.');toast.error('Sign-in failed. Please check your credentials.',{position:toast.POSITION.TOP_RIGHT,autoClose:3000});}}catch(error){console.error('Error signing in:',error);toast.error('Error signing in',{position:toast.POSITION.TOP_RIGHT,autoClose:3000});}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",className:classes.container,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",gutterBottom:true,children:isSignUp?'Sign Up':'Sign In'}),isSignUp?/*#__PURE__*/_jsx(SignUpForm,{onSignUp:handleSignUp}):/*#__PURE__*/_jsx(SignInForm,{onSignIn:handleSignIn}),/*#__PURE__*/_jsx(Grid,{container:true,justify:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"text\",className:classes.toggleButton,onClick:()=>setIsSignUp(!isSignUp),children:isSignUp?'Already have an account? Sign In':'Create an account'})})]});};export default AuthPage;","map":{"version":3,"names":["React","useState","Container","Typography","Button","Grid","makeStyles","SignUpForm","SignInForm","toast","jsx","_jsx","jsxs","_jsxs","useStyles","theme","container","marginTop","spacing","toggleButton","AuthPage","_ref","setIsAuthenticated","setUser","classes","isSignUp","setIsSignUp","handleSignUp","formData","response","fetch","method","headers","body","JSON","stringify","data","json","console","log","message","success","position","POSITION","TOP_RIGHT","autoClose","error","handleSignIn","ok","token","user","localStorage","setItem","window","location","href","maxWidth","className","children","variant","align","gutterBottom","onSignUp","onSignIn","justify","onClick"],"sources":["/Users/rayanslim/Desktop/docker-bootcamp-resources/03-section-three/ecommerce-ui/client/src/pages/AuthPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Container, Typography, Button, Grid } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SignUpForm from './SignUpForm';\nimport SignInForm from './SignInForm';\nimport {  toast } from 'react-toastify';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    marginTop: theme.spacing(4),\n  },\n  toggleButton: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst AuthPage = ({ setIsAuthenticated, setUser }) => {\n  const classes = useStyles();\n  const [isSignUp, setIsSignUp] = useState(false);\n\n  const handleSignUp = async (formData) => {\n    try {\n      const response = await fetch('http://localhost:3003/api/signup', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n      });\n      const data = await response.json();\n      console.log(data.message);\n      toast.success('Sign up successful. Please sign in.', {\n        position: toast.POSITION.TOP_RIGHT,\n        autoClose: 3000,\n      });\n        setIsSignUp(false);\n    } catch (error) {\n      console.error('Error signing up:', error);\n      toast.error('Error signing up. Please try again.', {\n        position: toast.POSITION.TOP_RIGHT,\n        autoClose: 3000,\n      });  \n    }\n  };\n\n  const handleSignIn = async (formData) => {\n    try {\n      const response = await fetch('http://localhost:3003/api/signin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n      });\n      \n      // Check if the response was successful\n      if (response.ok) {\n        const data = await response.json();\n        console.log(data.message);\n        \n        // Assuming your server responds with a token and user only if credentials are correct\n        if (data.token && data.user) {\n          // Store the token and user object only if authentication was successful\n          localStorage.setItem('token', data.token);\n          localStorage.setItem('user', JSON.stringify(data.user));\n          setIsAuthenticated(true);\n          setUser(data.user);\n          // Redirect to the home page after successful sign-in\n          window.location.href = '/';\n        } else {\n          // Handle cases where the server response format is unexpected\n          console.error('Unexpected server response format');\n          toast.error('Unexpected server response format.', {\n            position: toast.POSITION.TOP_RIGHT,\n            autoClose: 3000,\n          });    \n        }\n      } else {\n        // Handle unsuccessful sign-in attempts here\n        // For example, show an error message to the user\n        console.error('Sign-in failed. Please check your credentials.');\n        toast.error('Sign-in failed. Please check your credentials.', {\n            position: toast.POSITION.TOP_RIGHT,\n            autoClose: 3000,\n          });\n      }\n    } catch (error) {\n      console.error('Error signing in:', error);\n      toast.error('Error signing in', {\n        position: toast.POSITION.TOP_RIGHT,\n        autoClose: 3000,\n      });\n\n    }\n  };\n  \n\n  return (\n    <Container maxWidth=\"sm\" className={classes.container}>\n      <Typography variant=\"h4\" align=\"center\" gutterBottom>\n        {isSignUp ? 'Sign Up' : 'Sign In'}\n      </Typography>\n      {isSignUp ? (\n        <SignUpForm onSignUp={handleSignUp} />\n      ) : (\n        <SignInForm onSignIn={handleSignIn} />\n      )}\n      <Grid container justify=\"center\">\n        <Button\n          variant=\"text\"\n          className={classes.toggleButton}\n          onClick={() => setIsSignUp(!isSignUp)}\n        >\n          {isSignUp ? 'Already have an account? Sign In' : 'Create an account'}\n        </Button>\n      </Grid>\n    </Container>\n  );\n};\n\nexport default AuthPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}