{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import'./ProductDetail.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ProductDetail=()=>{const{id}=useParams();const[product,setProduct]=useState(null);const[quantity,setQuantity]=useState(null);useEffect(()=>{fetchProduct();fetchInventory();},[id]);const fetchProduct=async()=>{try{const response=await fetch(\"http://localhost:3001/api/products/\".concat(id));const data=await response.json();setProduct(data);}catch(error){console.error('Error fetching product:',error);}};const fetchInventory=async()=>{try{const response=await fetch(\"http://localhost:3002/api/inventory/\".concat(id));const data=await response.json();setQuantity(data.quantity);}catch(error){console.error('Error fetching inventory:',error);}};// Helper function to format product names into a file path\nconst formatImageName=name=>{// Assuming your product names match your image filenames including spaces and case\nreturn\"/images/products/\".concat(encodeURIComponent(name),\".webp\");};if(!product){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"product-detail-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-image\",children:/*#__PURE__*/_jsx(\"img\",{src:formatImageName(product.name),alt:product.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"product-description\",children:product.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-price\",children:[\"$\",product.price.toFixed(2)]}),/*#__PURE__*/_jsx(\"div\",{className:\"product-category\",children:product.category}),quantity!==null?/*#__PURE__*/_jsxs(\"div\",{className:\"product-quantity\",children:[\"In Stock: \",quantity]}):/*#__PURE__*/_jsx(\"div\",{className:\"product-quantity\",children:\"Loading stock quantity...\"}),/*#__PURE__*/_jsx(\"button\",{className:\"purchase-button\",children:\"Add to Cart\"}),/*#__PURE__*/_jsx(Link,{to:\"/products\",className:\"back-button\",children:\"\\u2190 Back to Products\"})]})]});};export default ProductDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","jsx","_jsx","jsxs","_jsxs","ProductDetail","id","product","setProduct","quantity","setQuantity","fetchProduct","fetchInventory","response","fetch","concat","data","json","error","console","formatImageName","name","encodeURIComponent","children","className","src","alt","description","price","toFixed","category","to"],"sources":["/Users/rayanslim/Desktop/docker-bootcamp-resources/03-section-three/ecommerce-ui/client/src/pages/ProductDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport './ProductDetail.css';\n\nconst ProductDetail = () => {\n  const { id } = useParams();\n  const [product, setProduct] = useState(null);\n  const [quantity, setQuantity] = useState(null);\n\n  useEffect(() => {\n    fetchProduct();\n    fetchInventory();\n  }, [id]);\n\n  const fetchProduct = async () => {\n    try {\n      const response = await fetch(`http://localhost:3001/api/products/${id}`);\n      const data = await response.json();\n      setProduct(data);\n    } catch (error) {\n      console.error('Error fetching product:', error);\n    }\n  };\n\n  const fetchInventory = async () => {\n    try {\n      const response = await fetch(`http://localhost:3002/api/inventory/${id}`);\n      const data = await response.json();\n      setQuantity(data.quantity);\n    } catch (error) {\n      console.error('Error fetching inventory:', error);\n    }\n  };\n\n  // Helper function to format product names into a file path\n  const formatImageName = (name) => {\n    // Assuming your product names match your image filenames including spaces and case\n    return `/images/products/${encodeURIComponent(name)}.webp`;\n  };\n\n  if (!product) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div className=\"product-detail-container\">\n      <div className=\"product-image\">\n        {/* Use the helper function to dynamically set the image src */}\n        <img src={formatImageName(product.name)} alt={product.name} />\n      </div>\n      <div className=\"product-info\">\n        <h2>{product.name}</h2>\n        <p className=\"product-description\">{product.description}</p>\n        <div className=\"product-price\">${product.price.toFixed(2)}</div>\n        <div className=\"product-category\">{product.category}</div>\n        {quantity !== null ? (\n          <div className=\"product-quantity\">In Stock: {quantity}</div>\n        ) : (\n          <div className=\"product-quantity\">Loading stock quantity...</div>\n        )}\n        <button className=\"purchase-button\">Add to Cart</button>\n        <Link to=\"/products\" className=\"back-button\">\n          &larr; Back to Products\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}